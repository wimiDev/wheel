{"version":3,"sources":["lightctrl.js"],"names":["cc","Class","extends","Component","properties","rgLow","rgHeight","state","start","lights","Array","init","time","wheel","find","node","i","name","light","getChildByName","getComponent","setId","turnAll","schedule","sch01","on","circleRun","circleIndex","offOrOn","off"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAQ,CADA;AAERC,kBAAU,EAFF;AAGRC,eAAO;AAHC,KAHP;;AASL;;AAEAC,SAXK,mBAWI;AACL,aAAKC,MAAL,GAAc,IAAIC,KAAJ,EAAd;AACA,aAAKC,IAAL;AACA,aAAKC,IAAL,GAAY,CAAZ;AACH,KAfI;AAiBLD,QAjBK,kBAiBE;AACH,YAAIE,QAAQb,GAAGc,IAAH,CAAQ,gBAAR,EAAyB,KAAKC,IAA9B,CAAZ;AACA,aAAI,IAAIC,IAAI,KAAKX,KAAjB,EAAwBW,KAAK,KAAKV,QAAlC,EAA4CU,GAA5C,EACA;AACI,gBAAIC,OAAO,WAAWD,CAAtB;AACA;AACA,gBAAIE,QAAQL,MAAMM,cAAN,CAAqBF,IAArB,CAAZ;AACA;AACAC,kBAAME,YAAN,CAAmB,OAAnB,EAA4BC,KAA5B,CAAkCL,CAAlC;AACA,iBAAKP,MAAL,CAAYO,CAAZ,IAAiBE,KAAjB;AACH;AACD,aAAKI,OAAL,CAAa,KAAb;AACA,aAAKC,QAAL,CAAc,KAAKC,KAAnB,EAAyB,IAAzB;AACA,aAAKf,MAAL,CAAY,CAAZ,EAAeW,YAAf,CAA4B,OAA5B,EAAqCK,EAArC;AACA,aAAKhB,MAAL,CAAY,CAAZ,EAAeW,YAAf,CAA4B,OAA5B,EAAqCK,EAArC;AACA,aAAKhB,MAAL,CAAY,CAAZ,EAAeW,YAAf,CAA4B,OAA5B,EAAqCK,EAArC;AACH,KAjCI;AAmCLC,aAnCK,uBAmCO;AACR,YAAG,KAAKC,WAAL,GAAmB,KAAKrB,QAAxB,IAAoC,CAAC,KAAKqB,WAA7C,EACA;AACI,iBAAKL,OAAL,CAAa,KAAb;AACA,iBAAKK,WAAL,GAAmB,KAAKtB,KAAxB;AACH;AACD;AACA,aAAKI,MAAL,CAAY,KAAKkB,WAAjB,EAA8BP,YAA9B,CAA2C,OAA3C,EAAoDK,EAApD;AACA,aAAKE,WAAL,IAAoB,CAApB;AAEH,KA7CI;AA+CLL,WA/CK,mBA+CIM,OA/CJ,EA+Ca;AACd,aAAI,IAAIZ,IAAI,KAAKX,KAAjB,EAAwBW,KAAK,KAAKV,QAAlC,EAA4CU,GAA5C,EACA;AACI,gBAAGY,OAAH,EACA;AACI,qBAAKnB,MAAL,CAAYO,CAAZ,EAAeI,YAAf,CAA4B,OAA5B,EAAqCK,EAArC;AACA;AACH;AACD,iBAAKhB,MAAL,CAAYO,CAAZ,EAAeI,YAAf,CAA4B,OAA5B,EAAqCS,GAArC;AACH;AACJ,KAzDI;AA2DLL,SA3DK,mBA2DI;AACL,YAAG,KAAKZ,IAAL,GAAY,EAAZ,IAAkB,CAArB,EACA;AACI,iBAAKc,SAAL;AACH;AACD,aAAKd,IAAL,IAAa,CAAb;AACH;AAjEI;;AAmEL;AAnEJ","file":"lightctrl.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        rgLow:  1,\n        rgHeight: 14,\n        state: \"dnt\",\n    },\n\n    // onLoad () {},\n\n    start () {\n        this.lights = new Array();\n        this.init();\n        this.time = 0;\n    },\n    \n    init() {\n        var wheel = cc.find(\"main/wheel_bg1\",this.node); \n        for(var i = this.rgLow; i <= this.rgHeight; i++)\n        {\n            var name = \"light_\" + i;\n            // cc.log(\"get light by name ->%s\",name);\n            var light = wheel.getChildByName(name);\n            // cc.log(\"%s = %s\",name,light);\n            light.getComponent(\"light\").setId(i)\n            this.lights[i] = light;\n        }\n        this.turnAll(false);\n        this.schedule(this.sch01,0.01);\n        this.lights[1].getComponent(\"light\").on();\n        this.lights[2].getComponent(\"light\").on();\n        this.lights[3].getComponent(\"light\").on();\n    },\n\n    circleRun() {\n        if(this.circleIndex > this.rgHeight || !this.circleIndex)\n        {   \n            this.turnAll(false);\n            this.circleIndex = this.rgLow;\n        }\n        // cc.log(\"this.lights[%s] = %s\", this.circleIndex, this.lights[this.circleIndex])\n        this.lights[this.circleIndex].getComponent(\"light\").on();\n        this.circleIndex += 1;\n\n    },\n\n    turnAll (offOrOn) {\n        for(var i = this.rgLow; i <= this.rgHeight; i++)\n        {\n            if(offOrOn)\n            {\n                this.lights[i].getComponent(\"light\").on();\n                continue;\n            }\n            this.lights[i].getComponent(\"light\").off();\n        }\n    },\n\n    sch01 () {\n        if(this.time % 20 == 0)\n        {\n            this.circleRun();\n        }\n        this.time += 1;\n    },\n\n    // update (dt) {},\n});\n"]}