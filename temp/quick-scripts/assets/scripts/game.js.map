{"version":3,"sources":["game.js"],"names":["cc","Class","extends","Component","properties","circle","default","type","Node","itemTemplate","curRotate","setp","curSpeed","timer1","mysScheduler","listScript","circleRun","speed","log","cirecleNode","stopAllActions","rotate","rotateBy","callback","callFunc","updateRotate","seq","sequence","runAction","repeatForever","createItem","tilp","num","id","item","instantiate","x","y","getComponent","updateItem","cirecleStopToSetp","are","rotation","Math","abs","resetTimer1","pushToList","target","data","startRandom","_youGetNum","floor","rand","startTimer1","onLoad","recarbg","find","node","start","time","schedule","sch1s","unschedule","dt","update"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        circle:{\n            default:null,\n            type:cc.Node,\n        },\n        itemTemplate:{\n            default:null,\n            type:cc.Node, \n        },\n        curRotate: 0,\n        setp: 51.4,\n        curSpeed: 0,\n        timer1 : 0,\n        mysScheduler : null,\n        listScript : null,\n    },\n\n \n    circleRun (speed) {\n       if(!this.circle){ \n\n        cc.log(\"circle is null\");\n        return;\n        }\n        if (speed < 0 ){speed = 0}\n        if(speed == this.setp){return ;}\n        cc.log(\"---------- circlerun -----------\")\n        speed = speed || 50;\n        this.speed = speed;\n        var cirecleNode = this.circle;\n        cirecleNode.stopAllActions();\n        var rotate = cc.rotateBy(this.setp/speed,-this.setp);\n        var callback = cc.callFunc(this.updateRotate, this);\n\n        var seq = cc.sequence(rotate,callback);\n        cirecleNode.runAction(cc.repeatForever(seq));\n        return;\n    },\n\n    createItem (tilp, num, id){\n        var item = cc.instantiate(this.itemTemplate)\n        item.x = 0\n        item.y = 0\n        item.getComponent(\"item\").updateItem(tilp,num,0)\n        return item\n    },\n\n    cirecleStopToSetp (setp) {\n        var rotate = (setp - 1) * this.setp % 360;\n        var are = 51;\n        var curRotate = -this.circle.rotation % 360\n        // cc.log(\"curRotate = %s, rotate = %s\",curRotate, rotate)\n        if (Math.abs(curRotate - rotate) <= 3 )\n        {\n            var cirecleNode = this.circle;\n            cirecleNode.stopAllActions();\n            this.resetTimer1();\n            var item = this.createItem(\"哈哈哈\",250,0)\n            this.listScript.pushToList(item)\n            cc.log(\"-------- stoped all -------\")\n        }\n    },\n\n    updateRotate (target,data){\n        this.curRotate = (this.curRotate + this.setp) % 360\n        // cc.log(\"curRotate = %s, setp = %s\", this.curRotate, this.setp)\n    },\n\n    startRandom () {\n        this._youGetNum  = Math.floor((cc.rand() % 6) + 1);\n        cc.log(\"you get num = %d\", this._youGetNum)\n        this.startTimer1()\n    },\n// LIFE-CYCLE CALLBACKS:\n     onLoad () {\n        cc.log(\"--------- game start -----------\");\n        this.startRandom();\n        cc.log(\"-------------- getrecarbg -------------\");\n        var recarbg = cc.find(\"main/recarbg\",this.node); \n        this.listScript = recarbg.getComponent(\"ListViewCtrl\"); \n        cc.log(this.listScript);\n         },\n\n    start () {\n\n    },\n\n    startTimer1(time){\n        this.timer1 = time || 0;\n        this.schedule(this.sch1s,1);\n        cc.log(\"----------- startTimer1 ----------\");\n    },\n\n    resetTimer1(time){\n        this.timer1 = time || 0;\n        this.unschedule(this.sch1s);\n        cc.log(\"-------- resetTimer1 ---------\");\n    },\n\n    sch1s (dt){\n        this.timer1 = this.timer1 + 1;\n        cc.log(\"timer1 time = %s,speed = %d\", this.timer1, this.speed);\n        if (this.timer1 >= 4)\n        {\n            cc.log(\"--------speed -- --------\")\n            this.circleRun(this.speed - this.timer1*10);\n        }\n        else\n        {\n            cc.log(\"--------speed ++ --------\")\n            this.circleRun(this.timer1*5 * this.setp);\n        }\n    },\n    update (dt) {\n        if(this.timer1 <= 0){return;}\n        if (this.timer1 >= 4)\n        {\n            if ((this.speed - this.setp) <= 1)\n            {\n                // cc.log(\"------------ will be stop ---------\");\n                this.cirecleStopToSetp(this._youGetNum);\n            }\n        }\n    },\n});\n"]}