{"version":3,"sources":["game.js"],"names":["cc","Class","extends","Component","properties","circle","default","type","Node","curRotate","setp","curSpeed","timer1","mysScheduler","circleRun","speed","log","cirecleNode","stopAllActions","rotate","rotateBy","callback","callFunc","updateRotate","seq","sequence","runAction","repeatForever","cirecleStopToSetp","are","rotation","Math","abs","resetTimer1","target","data","startRandom","_youGetNum","floor","rand","startTimer1","onLoad","myScheduler","director","getScheduler","start","time","schedule","sch1s","unschedule","dt","update"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAERC,gBAAO;AACHC,qBAAQ,IADL;AAEHC,kBAAKP,GAAGQ;AAFL,SAFC;;AAORC,mBAAW,CAPH;AAQRC,cAAM,IARE;AASRC,kBAAU,CATF;AAURC,gBAAS,CAVD;AAWRC,sBAAe;AAXP,KAHP;;AAkBLC,aAlBK,qBAkBMC,KAlBN,EAkBa;AACf,YAAG,CAAC,KAAKV,MAAT,EAAgB;;AAEfL,eAAGgB,GAAH,CAAO,gBAAP;AACA;AACC;AACD,YAAID,QAAQ,CAAZ,EAAe;AAACA,oBAAQ,CAAR;AAAU;AAC1B,YAAGA,SAAS,KAAKL,IAAjB,EAAsB;AAAC;AAAS;AAChCV,WAAGgB,GAAH,CAAO,kCAAP;AACAD,gBAAQA,SAAS,EAAjB;AACA,aAAKA,KAAL,GAAaA,KAAb;AACA,YAAIE,cAAc,KAAKZ,MAAvB;AACAY,oBAAYC,cAAZ;AACA,YAAIC,SAASnB,GAAGoB,QAAH,CAAY,KAAKV,IAAL,GAAUK,KAAtB,EAA4B,CAAC,KAAKL,IAAlC,CAAb;AACA,YAAIW,WAAWrB,GAAGsB,QAAH,CAAY,KAAKC,YAAjB,EAA+B,IAA/B,CAAf;;AAEA,YAAIC,MAAMxB,GAAGyB,QAAH,CAAYN,MAAZ,EAAmBE,QAAnB,CAAV;AACAJ,oBAAYS,SAAZ,CAAsB1B,GAAG2B,aAAH,CAAiBH,GAAjB,CAAtB;AACA;AACH,KArCI;AAuCLI,qBAvCK,6BAuCclB,IAvCd,EAuCoB;AACrB,YAAIS,SAAS,CAACT,OAAO,CAAR,IAAa,KAAKA,IAAlB,GAAyB,GAAtC;AACA,YAAImB,MAAM,EAAV;AACA,YAAIpB,YAAY,CAAC,KAAKJ,MAAL,CAAYyB,QAAb,GAAwB,GAAxC;AACA9B,WAAGgB,GAAH,CAAO,6BAAP,EAAqCP,SAArC,EAAgDU,MAAhD;AACA,YAAIY,KAAKC,GAAL,CAASvB,YAAYU,MAArB,KAAgC,CAApC,EACA;AACI,gBAAIF,cAAc,KAAKZ,MAAvB;AACAY,wBAAYC,cAAZ;AACA,iBAAKe,WAAL;AACAjC,eAAGgB,GAAH,CAAO,6BAAP;AACH;AACJ,KAnDI;AAqDLO,gBArDK,wBAqDSW,MArDT,EAqDgBC,IArDhB,EAqDqB;AACtB,aAAK1B,SAAL,GAAiB,CAAC,KAAKA,SAAL,GAAiB,KAAKC,IAAvB,IAA+B,GAAhD;AACA;AACH,KAxDI;AA0DL0B,eA1DK,yBA0DU;AACX,aAAKC,UAAL,GAAmBN,KAAKO,KAAL,CAAYtC,GAAGuC,IAAH,KAAY,CAAb,GAAkB,CAA7B,CAAnB;AACAvC,WAAGgB,GAAH,CAAO,kBAAP,EAA2B,KAAKqB,UAAhC;AACA,aAAKG,WAAL;AACH,KA9DI;;AA+DT;AACKC,UAhEI,oBAgEM;AACPzC,WAAGgB,GAAH,CAAO,kCAAP;AACA,aAAK0B,WAAL,GAAmB1C,GAAG2C,QAAH,CAAYC,YAAZ,EAAnB;AACA,aAAKR,WAAL;AACF,KApEG;AAsELS,SAtEK,mBAsEI,CAER,CAxEI;AA0ELL,eA1EK,uBA0EOM,IA1EP,EA0EY;AACb,aAAKlC,MAAL,GAAckC,QAAQ,CAAtB;AACA,aAAKJ,WAAL,CAAiBK,QAAjB,CAA0B,KAAKC,KAA/B,EAAsC,IAAtC,EAA4C,CAA5C;AACAhD,WAAGgB,GAAH,CAAO,oCAAP;AACH,KA9EI;AAgFLiB,eAhFK,uBAgFOa,IAhFP,EAgFY;AACb,aAAKlC,MAAL,GAAckC,QAAQ,CAAtB;AACA,aAAKJ,WAAL,CAAiBO,UAAjB,CAA4B,KAAKD,KAAjC,EAAuC,IAAvC;AACAhD,WAAGgB,GAAH,CAAO,gCAAP;AACH,KApFI;AAsFLgC,SAtFK,iBAsFEE,EAtFF,EAsFK;AACN,aAAKtC,MAAL,GAAc,KAAKA,MAAL,GAAc,CAA5B;AACAZ,WAAGgB,GAAH,CAAO,6BAAP,EAAsC,KAAKJ,MAA3C,EAAmD,KAAKG,KAAxD;AACA,YAAI,KAAKH,MAAL,IAAe,CAAnB,EACA;AACIZ,eAAGgB,GAAH,CAAO,2BAAP;AACA,iBAAKF,SAAL,CAAe,KAAKC,KAAL,GAAa,KAAKH,MAAL,GAAY,EAAxC;AACH,SAJD,MAMA;AACIZ,eAAGgB,GAAH,CAAO,2BAAP;AACA,iBAAKF,SAAL,CAAe,KAAKF,MAAL,GAAY,CAAZ,GAAgB,KAAKF,IAApC;AACH;AACJ,KAnGI;AAoGLyC,UApGK,kBAoGGD,EApGH,EAoGO;AACR,YAAG,KAAKtC,MAAL,IAAe,CAAlB,EAAoB;AAAC;AAAQ;AAC7B,YAAI,KAAKA,MAAL,IAAe,CAAnB,EACA;AACI,gBAAK,KAAKG,KAAL,GAAa,KAAKL,IAAnB,IAA4B,CAAhC,EACA;AACIV,mBAAGgB,GAAH,CAAO,qCAAP;AACA,qBAAKY,iBAAL,CAAuB,KAAKS,UAA5B;AACH;AACJ;AACJ;AA9GI,CAAT","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        circle:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n\r\n        curRotate: 0,\r\n        setp: 51.4,\r\n        curSpeed: 0,\r\n        timer1 : 0,\r\n        mysScheduler : null,\r\n    },\r\n\r\n \r\n    circleRun (speed) {\r\n       if(!this.circle){ \r\n\r\n        cc.log(\"circle is null\");\r\n        return;\r\n        }\r\n        if (speed < 0 ){speed = 0}\r\n        if(speed == this.setp){return ;}\r\n        cc.log(\"---------- circlerun -----------\")\r\n        speed = speed || 50;\r\n        this.speed = speed;\r\n        var cirecleNode = this.circle;\r\n        cirecleNode.stopAllActions();\r\n        var rotate = cc.rotateBy(this.setp/speed,-this.setp);\r\n        var callback = cc.callFunc(this.updateRotate, this);\r\n\r\n        var seq = cc.sequence(rotate,callback);\r\n        cirecleNode.runAction(cc.repeatForever(seq));\r\n        return;\r\n    },\r\n\r\n    cirecleStopToSetp (setp) {\r\n        var rotate = (setp - 1) * this.setp % 360;\r\n        var are = 51;\r\n        var curRotate = -this.circle.rotation % 360\r\n        cc.log(\"curRotate = %s, rotate = %s\",curRotate, rotate)\r\n        if (Math.abs(curRotate - rotate) <= 3 )\r\n        {\r\n            var cirecleNode = this.circle;\r\n            cirecleNode.stopAllActions();\r\n            this.resetTimer1();\r\n            cc.log(\"-------- stoped all -------\")\r\n        }\r\n    },\r\n\r\n    updateRotate (target,data){\r\n        this.curRotate = (this.curRotate + this.setp) % 360\r\n        // cc.log(\"curRotate = %s, setp = %s\", this.curRotate, this.setp)\r\n    },\r\n\r\n    startRandom () {\r\n        this._youGetNum  = Math.floor((cc.rand() % 6) + 1);\r\n        cc.log(\"you get num = %d\", this._youGetNum)\r\n        this.startTimer1()\r\n    },\r\n// LIFE-CYCLE CALLBACKS:\r\n     onLoad () {\r\n        cc.log(\"--------- game start -----------\");\r\n        this.myScheduler = cc.director.getScheduler()\r\n        this.startRandom();\r\n     },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    startTimer1(time){\r\n        this.timer1 = time || 0;\r\n        this.myScheduler.schedule(this.sch1s, this, 1);\r\n        cc.log(\"----------- startTimer1 ----------\");\r\n    },\r\n\r\n    resetTimer1(time){\r\n        this.timer1 = time || 0;\r\n        this.myScheduler.unschedule(this.sch1s,this);\r\n        cc.log(\"-------- resetTimer1 ---------\");\r\n    },\r\n\r\n    sch1s (dt){\r\n        this.timer1 = this.timer1 + 1;\r\n        cc.log(\"timer1 time = %s,speed = %d\", this.timer1, this.speed);\r\n        if (this.timer1 >= 4)\r\n        {\r\n            cc.log(\"--------speed -- --------\")\r\n            this.circleRun(this.speed - this.timer1*10);\r\n        }\r\n        else\r\n        {\r\n            cc.log(\"--------speed ++ --------\")\r\n            this.circleRun(this.timer1*5 * this.setp);\r\n        }\r\n    },\r\n    update (dt) {\r\n        if(this.timer1 <= 0){return;}\r\n        if (this.timer1 >= 4)\r\n        {\r\n            if ((this.speed - this.setp) <= 1)\r\n            {\r\n                cc.log(\"------------ will be stop ---------\");\r\n                this.cirecleStopToSetp(this._youGetNum);\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}