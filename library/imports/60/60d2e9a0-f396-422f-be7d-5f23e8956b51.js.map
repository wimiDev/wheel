{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\game.js"],"names":["cc","Class","extends","Component","properties","circle","default","type","Node","curRotate","setp","curSpeed","timer1","mysScheduler","listScript","circleRun","speed","log","cirecleNode","stopAllActions","rotate","rotateBy","callback","callFunc","updateRotate","seq","sequence","runAction","repeatForever","cirecleStopToSetp","are","rotation","Math","abs","resetTimer1","addItem","target","data","startRandom","_youGetNum","floor","rand","startTimer1","onLoad","myScheduler","director","getScheduler","node","getChildByName","start","time","schedule","sch1s","unschedule","dt","update"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        circle:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n\r\n        curRotate: 0,\r\n        setp: 51.4,\r\n        curSpeed: 0,\r\n        timer1 : 0,\r\n        mysScheduler : null,\r\n        listScript : null,\r\n    },\r\n\r\n \r\n    circleRun (speed) {\r\n       if(!this.circle){ \r\n\r\n        cc.log(\"circle is null\");\r\n        return;\r\n        }\r\n        if (speed < 0 ){speed = 0}\r\n        if(speed == this.setp){return ;}\r\n        cc.log(\"---------- circlerun -----------\")\r\n        speed = speed || 50;\r\n        this.speed = speed;\r\n        var cirecleNode = this.circle;\r\n        cirecleNode.stopAllActions();\r\n        var rotate = cc.rotateBy(this.setp/speed,-this.setp);\r\n        var callback = cc.callFunc(this.updateRotate, this);\r\n\r\n        var seq = cc.sequence(rotate,callback);\r\n        cirecleNode.runAction(cc.repeatForever(seq));\r\n        return;\r\n    },\r\n\r\n    cirecleStopToSetp (setp) {\r\n        var rotate = (setp - 1) * this.setp % 360;\r\n        var are = 51;\r\n        var curRotate = -this.circle.rotation % 360\r\n        // cc.log(\"curRotate = %s, rotate = %s\",curRotate, rotate)\r\n        if (Math.abs(curRotate - rotate) <= 3 )\r\n        {\r\n            var cirecleNode = this.circle;\r\n            cirecleNode.stopAllActions();\r\n            this.resetTimer1();\r\n            cc.log(this.listScript)\r\n            this.listScript.addItem()\r\n            cc.log(\"-------- stoped all -------\")\r\n        }\r\n    },\r\n\r\n    updateRotate (target,data){\r\n        this.curRotate = (this.curRotate + this.setp) % 360\r\n        // cc.log(\"curRotate = %s, setp = %s\", this.curRotate, this.setp)\r\n    },\r\n\r\n    startRandom () {\r\n        this._youGetNum  = Math.floor((cc.rand() % 6) + 1);\r\n        cc.log(\"you get num = %d\", this._youGetNum)\r\n        this.startTimer1()\r\n    },\r\n// LIFE-CYCLE CALLBACKS:\r\n     onLoad () {\r\n        cc.log(\"--------- game start -----------\");\r\n        this.myScheduler = cc.director.getScheduler()\r\n        this.startRandom();\r\n        cc.log(\"-------------- getrecarbg -------------\")\r\n        cc.log(this.node.getChildByName(\"main\"))\r\n        // this.listScript = this.node.getChildByName(\"recarbg\")\r\n     },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    startTimer1(time){\r\n        this.timer1 = time || 0;\r\n        this.myScheduler.schedule(this.sch1s, this, 1);\r\n        cc.log(\"----------- startTimer1 ----------\");\r\n    },\r\n\r\n    resetTimer1(time){\r\n        this.timer1 = time || 0;\r\n        this.myScheduler.unschedule(this.sch1s,this);\r\n        cc.log(\"-------- resetTimer1 ---------\");\r\n    },\r\n\r\n    sch1s (dt){\r\n        this.timer1 = this.timer1 + 1;\r\n        cc.log(\"timer1 time = %s,speed = %d\", this.timer1, this.speed);\r\n        if (this.timer1 >= 4)\r\n        {\r\n            cc.log(\"--------speed -- --------\")\r\n            this.circleRun(this.speed - this.timer1*10);\r\n        }\r\n        else\r\n        {\r\n            cc.log(\"--------speed ++ --------\")\r\n            this.circleRun(this.timer1*5 * this.setp);\r\n        }\r\n    },\r\n    update (dt) {\r\n        if(this.timer1 <= 0){return;}\r\n        if (this.timer1 >= 4)\r\n        {\r\n            if ((this.speed - this.setp) <= 1)\r\n            {\r\n                // cc.log(\"------------ will be stop ---------\");\r\n                this.cirecleStopToSetp(this._youGetNum);\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}