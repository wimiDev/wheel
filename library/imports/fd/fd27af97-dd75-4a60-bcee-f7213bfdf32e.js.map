{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\lightctrl.js"],"names":["cc","Class","extends","Component","properties","rgLow","rgHeight","state","start","lights","Array","init","time","wheel","find","node","i","name","light","getChildByName","getComponent","setId","turnAll","schedule","sch01","circleRun","circleIndex","off","offOrOn","on"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAQ,CADA;AAERC,kBAAU,EAFF;AAGRC,eAAO;AAHC,KAHP;;AASL;;AAEAC,SAXK,mBAWI;AACL,aAAKC,MAAL,GAAc,IAAIC,KAAJ,EAAd;AACA,aAAKC,IAAL;AACA,aAAKC,IAAL,GAAY,CAAZ;AACH,KAfI;AAiBLD,QAjBK,kBAiBE;AACH,YAAIE,QAAQb,GAAGc,IAAH,CAAQ,gBAAR,EAAyB,KAAKC,IAA9B,CAAZ;AACA,aAAI,IAAIC,IAAI,KAAKX,KAAjB,EAAwBW,KAAK,KAAKV,QAAlC,EAA4CU,GAA5C,EACA;AACI,gBAAIC,OAAO,WAAWD,CAAtB;AACA;AACA,gBAAIE,QAAQL,MAAMM,cAAN,CAAqBF,IAArB,CAAZ;AACA;AACAC,kBAAME,YAAN,CAAmB,OAAnB,EAA4BC,KAA5B,CAAkCL,CAAlC;AACA,iBAAKP,MAAL,CAAYO,CAAZ,IAAiBE,KAAjB;AACH;AACD,aAAKI,OAAL,CAAa,KAAb;AACA,aAAKC,QAAL,CAAc,KAAKC,KAAnB,EAAyB,IAAzB;AACH,KA9BI;AAgCLC,aAhCK,uBAgCO;AACR,YAAG,KAAKC,WAAL,GAAmB,KAAKpB,QAAxB,IAAoC,CAAC,KAAKoB,WAA7C,EACA;AACI,iBAAKA,WAAL,GAAmB,KAAKrB,KAAxB;AACH;AACD;AACA,aAAKI,MAAL,CAAY,KAAKiB,WAAjB,EAA8BN,YAA9B,CAA2C,OAA3C,EAAoDO,GAApD;AACA;AAEH,KAzCI;AA2CLL,WA3CK,mBA2CIM,OA3CJ,EA2Ca;AACd,aAAI,IAAIZ,IAAI,KAAKX,KAAjB,EAAwBW,KAAK,KAAKV,QAAlC,EAA4CU,GAA5C,EACA;AACI,gBAAGY,OAAH,EACA;AACI,qBAAKnB,MAAL,CAAYO,CAAZ,EAAeI,YAAf,CAA4B,OAA5B,EAAqCS,EAArC;AACA;AACH;AACD,iBAAKpB,MAAL,CAAYO,CAAZ,EAAeI,YAAf,CAA4B,OAA5B,EAAqCO,GAArC;AACH;AACJ,KArDI;AAuDLH,SAvDK,mBAuDI;AACL,YAAG,KAAKZ,IAAL,GAAY,GAAZ,IAAmB,CAAtB,EACA;AACI,iBAAKa,SAAL;AACH;AACD,aAAKb,IAAL,IAAa,CAAb;AACH;AA7DI;;AA+DL;AA/DJ","file":"lightctrl.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        rgLow:  1,\r\n        rgHeight: 14,\r\n        state: \"dnt\",\r\n    },\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        this.lights = new Array();\r\n        this.init();\r\n        this.time = 0;\r\n    },\r\n    \r\n    init() {\r\n        var wheel = cc.find(\"main/wheel_bg1\",this.node); \r\n        for(var i = this.rgLow; i <= this.rgHeight; i++)\r\n        {\r\n            var name = \"light_\" + i;\r\n            // cc.log(\"get light by name ->%s\",name);\r\n            var light = wheel.getChildByName(name);\r\n            // cc.log(\"%s = %s\",name,light);\r\n            light.getComponent(\"light\").setId(i)\r\n            this.lights[i] = light;\r\n        }\r\n        this.turnAll(false);\r\n        this.schedule(this.sch01,0.01);\r\n    },\r\n\r\n    circleRun() {\r\n        if(this.circleIndex > this.rgHeight || !this.circleIndex)\r\n        {\r\n            this.circleIndex = this.rgLow;\r\n        }\r\n        // cc.log(\"this.lights[%s] = %s\", this.circleIndex, this.lights[this.circleIndex])\r\n        this.lights[this.circleIndex].getComponent(\"light\").off();\r\n        // this.circleIndex += 1;\r\n\r\n    },\r\n\r\n    turnAll (offOrOn) {\r\n        for(var i = this.rgLow; i <= this.rgHeight; i++)\r\n        {\r\n            if(offOrOn)\r\n            {\r\n                this.lights[i].getComponent(\"light\").on();\r\n                continue;\r\n            }\r\n            this.lights[i].getComponent(\"light\").off();\r\n        }\r\n    },\r\n\r\n    sch01 () {\r\n        if(this.time % 100 == 0)\r\n        {\r\n            this.circleRun();\r\n        }\r\n        this.time += 1;\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}