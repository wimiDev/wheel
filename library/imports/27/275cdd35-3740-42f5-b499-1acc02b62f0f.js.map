{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\broadcast.js"],"names":["cc","Class","extends","Component","properties","info1","default","type","Node","info2","tilp","windmil","msgQue","pos1","p","pos2","start","Array","index","bcCp1","getComponent","Label","string","bcCp2","schedule","sch1s","windmilRun","log","baradcastMsg","str","push","length","pop","showMsg","tilpSwing","runAction","moveBy","position","enable","stopAllActions","swingLeft","rotateTo","swingRight","swing","repeat","sequence","roateAct","repeatForever","rotateBy"],"mappings":"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","file":"broadcast.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        info1:{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        info2:{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        tilp:{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        windmil:{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        msgQue:null,\r\n\r\n        pos1:cc.p(0,0),\r\n        pos2:cc.p(0,-58),\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n       this.msgQue = new Array();\r\n       this.index = 1;\r\n       this.bcCp1 = this.info1.getComponent(cc.Label);\r\n       this.bcCp1.string = \"吃饱就可以睡觉了\";\r\n       this.bcCp2 = this.info2.getComponent(cc.Label);\r\n       this.bcCp2.string  = \"\";\r\n       this.schedule(this.sch1s,1);\r\n       this.windmilRun(true);\r\n       cc.log(\"broadcast start\");\r\n    },\r\n\r\n    baradcastMsg (str) {\r\n        cc.log(\"push msg:%s to que\",str);\r\n        this.msgQue.push(str);\r\n    },\r\n\r\n    sch1s () {\r\n        // cc.log(\"broadcast que len >>>> %s\",this.msgQue.length)\r\n        // cc.log(\"info2.x >>> %s,info2.y >>> %s\",this.info2.position.x,this.info2.position.y)\r\n        if (this.msgQue.length <= 0){\r\n            return;\r\n        }\r\n        cc.log(\"broadcast update~\");\r\n        var str = this.msgQue.pop();\r\n        this.showMsg(str);\r\n    },\r\n\r\n    showMsg (str) {\r\n        cc.log(\"broadcast showMsg >>>>>> %s\", str)\r\n        this.tilpSwing(true)\r\n        if(this.index == 1){\r\n            this.info1.runAction(cc.moveBy(0.2,cc.p(0,70)));\r\n            this.info2.position = this.pos2;\r\n            this.info2.getComponent(cc.Label).string = str;\r\n            this.info2.runAction(cc.moveBy(0.2,cc.p(0,58)));\r\n            this.index = 2;\r\n        }\r\n        else{\r\n            this.info2.runAction(cc.moveBy(0.2,cc.p(0,70)));\r\n            this.info1.getComponent(cc.Label).string = str;\r\n            this.info1.position = this.pos2;\r\n            this.info1.runAction(cc.moveBy(0.2,cc.p(0,58)));\r\n            this.index = 1;\r\n        }\r\n    },\r\n\r\n    tilpSwing (enable) {\r\n        if(!enable)\r\n        {\r\n            this.tilp.stopAllActions()\r\n            return;\r\n        }\r\n        var swingLeft = cc.rotateTo(0.1,-5);\r\n        var swingRight = cc.rotateTo(0.1,5);\r\n        var swing = cc.repeat(cc.sequence(swingLeft, swingRight),5)\r\n        this.tilp.runAction(swing);\r\n    },\r\n\r\n    windmilRun (enable) {\r\n        if(!enable)\r\n        {\r\n            this.windmil.stopAllActions()\r\n            return;\r\n        }\r\n        var roateAct = cc.repeatForever(cc.rotateBy(5,360))\r\n        this.windmil.runAction(roateAct)\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}