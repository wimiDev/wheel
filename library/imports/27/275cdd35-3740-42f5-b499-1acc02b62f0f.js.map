{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\broadcast.js"],"names":["cc","Class","extends","Component","properties","info1","default","type","Node","info2","tilp","windmil","msgQue","pos1","p","pos2","start","Array","index","bcCp1","getComponent","Label","string","bcCp2","schedule","sch1s","windmilRun","log","baradcastMsg","str","push","length","pop","showMsg","tilpSwing","runAction","moveBy","position","enable","stopAllActions","swingLeft","rotateTo","swingRight","swing","repeat","sequence","roateAct","repeatForever","rotateBy"],"mappings":"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","file":"broadcast.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        info1:{\n            default: null,\n            type: cc.Node,\n        },\n        info2:{\n            default: null,\n            type: cc.Node,\n        },\n        tilp:{\n            default: null,\n            type: cc.Node,\n        },\n        windmil:{\n            default: null,\n            type: cc.Node,\n        },\n\n        msgQue:null,\n\n        pos1:cc.p(0,0),\n        pos2:cc.p(0,-58),\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n       this.msgQue = new Array();\n       this.index = 1;\n       this.bcCp1 = this.info1.getComponent(cc.Label);\n       this.bcCp1.string = \"专业贴膜，5块一张，了解一下\";\n       this.bcCp2 = this.info2.getComponent(cc.Label);\n       this.bcCp2.string  = \"\";\n       this.schedule(this.sch1s,1);\n       this.windmilRun(true);\n       cc.log(\"broadcast start\");\n    },\n\n    baradcastMsg (str) {\n        cc.log(\"push msg:%s to que\",str);\n        this.msgQue.push(str);\n    },\n\n    sch1s () {\n        // cc.log(\"broadcast que len >>>> %s\",this.msgQue.length)\n        // cc.log(\"info2.x >>> %s,info2.y >>> %s\",this.info2.position.x,this.info2.position.y)\n        if (this.msgQue.length <= 0){\n            return;\n        }\n        cc.log(\"broadcast update~\");\n        var str = this.msgQue.pop();\n        this.showMsg(str);\n    },\n\n    showMsg (str) {\n        cc.log(\"broadcast showMsg >>>>>> %s\", str)\n        this.tilpSwing(true)\n        if(this.index == 1){\n            this.info1.runAction(cc.moveBy(0.2,cc.p(0,70)));\n            this.info2.position = this.pos2;\n            this.info2.getComponent(cc.Label).string = str;\n            this.info2.runAction(cc.moveBy(0.2,cc.p(0,58)));\n            this.index = 2;\n        }\n        else{\n            this.info2.runAction(cc.moveBy(0.2,cc.p(0,70)));\n            this.info1.getComponent(cc.Label).string = str;\n            this.info1.position = this.pos2;\n            this.info1.runAction(cc.moveBy(0.2,cc.p(0,58)));\n            this.index = 1;\n        }\n    },\n\n    tilpSwing (enable) {\n        if(!enable)\n        {\n            this.tilp.stopAllActions()\n            return;\n        }\n        var swingLeft = cc.rotateTo(0.1,-5);\n        var swingRight = cc.rotateTo(0.1,5);\n        var swing = cc.repeat(cc.sequence(swingLeft, swingRight),5)\n        this.tilp.runAction(swing);\n    },\n\n    windmilRun (enable) {\n        if(!enable)\n        {\n            this.windmil.stopAllActions()\n            return;\n        }\n        var roateAct = cc.repeatForever(cc.rotateBy(5,360))\n        this.windmil.runAction(roateAct)\n    },\n    // update (dt) {},\n});\n"]}